(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1382:function(e,r,t){Promise.resolve().then(t.bind(t,8502))},8502:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return H}});var a=t(7437),s=t(2265),d=t(7053),n=t(535),l=t(1994),o=t(3335);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.m6)((0,l.W)(r))}let c=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,asChild:l=!1,...o}=e,u=l?d.g7:"button";return(0,a.jsx)(u,{className:i(c({variant:s,size:n,className:t})),ref:r,...o})});u.displayName="Button";let m=s.forwardRef((e,r)=>{let{className:t,type:s,...d}=e;return(0,a.jsx)("input",{type:s,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...d})});m.displayName="Input";let f=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("textarea",{className:i("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});f.displayName="Textarea";let x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:i("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});x.displayName="Card";let g=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:i("flex flex-col space-y-1.5 p-6",t),...s})});g.displayName="CardHeader";let h=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:i("text-2xl font-semibold leading-none tracking-tight",t),...s})});h.displayName="CardTitle";let p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:i("text-sm text-muted-foreground",t),...s})});p.displayName="CardDescription";let v=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:i("p-6 pt-0",t),...s})});v.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:i("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter";let b=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function j(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{className:i(b({variant:t}),r),...s})}let y=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),N=s.forwardRef((e,r)=>{let{className:t,variant:s,...d}=e;return(0,a.jsx)("div",{ref:r,role:"alert",className:i(y({variant:s}),t),...d})});N.displayName="Alert",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h5",{ref:r,className:i("mb-1 font-medium leading-none tracking-tight",t),...s})}).displayName="AlertTitle";let w=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:i("text-sm [&_p]:leading-relaxed",t),...s})});w.displayName="AlertDescription";var k=t(7664);let _=s.forwardRef((e,r)=>{let{className:t,children:s,...d}=e;return(0,a.jsxs)(k.fC,{ref:r,className:i("relative overflow-hidden",t),...d,children:[(0,a.jsx)(k.l_,{className:"h-full w-full rounded-[inherit]",children:s}),(0,a.jsx)(C,{}),(0,a.jsx)(k.Ns,{})]})});_.displayName=k.fC.displayName;let C=s.forwardRef((e,r)=>{let{className:t,orientation:s="vertical",...d}=e;return(0,a.jsx)(k.gb,{ref:r,orientation:s,className:i("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...d,children:(0,a.jsx)(k.q4,{className:"relative flex-1 rounded-full bg-border"})})});C.displayName=k.gb.displayName;var R=t(3417),B=t(8736),S=t(2207),Z=t(221),A=t(1671),T=t(9388),D=t(8997),F=t(5135),z=t(5929),G=t(7226),P=t(1817),E=t(3276),O=t(6362),I=t(5922),U=t(1468),V=t.n(U);function H(){var e,r,t,d;let[n,l]=(0,s.useState)(""),[o,i]=(0,s.useState)(""),[c,b]=(0,s.useState)(!1),[y,k]=(0,s.useState)([]),[C,H]=(0,s.useState)(null),[L,q]=(0,s.useState)(null),J=(0,s.useRef)(null),{theme:M,setTheme:W}=(0,I.F)(),[$,K]=(0,s.useState)(null),[Q,X]=(0,s.useState)(!1),Y=e=>/^https:\/\/github\.com\/[a-zA-Z0-9_.-]+\/[a-zA-Z0-9_.-]+\/?$/.test(e),ee=()=>{if(J.current){let e=J.current.querySelector("[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}};(0,s.useEffect)(()=>{ee()},[y]);let er=async e=>{if(e.preventDefault(),!Y(n)){H("Please enter a valid GitHub repository URL");return}if(!o.trim()){H("Please enter a prompt describing the changes you want");return}H(null),k([]),q(null),b(!0);try{var r;let e=await fetch("/code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repoUrl:n,prompt:o})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=null===(r=e.body)||void 0===r?void 0:r.getReader(),a=new TextDecoder;if(!t)throw Error("No response body");for(;;){let{done:e,value:r}=await t.read();if(e)break;for(let e of a.decode(r).split("\n"))if(e.startsWith("data: "))try{let r=JSON.parse(e.slice(6)),t={id:Date.now().toString()+Math.random(),type:"ai_message",content:JSON.stringify(r,null,2),timestamp:new Date};k(e=>[...e,t]),"complete"===r.type?(q({prUrl:r.pr_url}),b(!1)):"error"===r.type&&(H(r.message||"An error occurred"),b(!1))}catch(e){console.error("Error parsing SSE data:",e)}}}catch(e){H(e instanceof Error?e.message:"An unexpected error occurred"),b(!1)}},et=e=>{switch(e){case"ai_message":default:return(0,a.jsx)(R.Z,{className:"h-4 w-4"});case"tool_read":return(0,a.jsx)(B.Z,{className:"h-4 w-4"});case"tool_edit":return(0,a.jsx)(S.Z,{className:"h-4 w-4"});case"tool_bash":return(0,a.jsx)(Z.Z,{className:"h-4 w-4"});case"complete":return(0,a.jsx)(A.Z,{className:"h-4 w-4"});case"error":return(0,a.jsx)(T.Z,{className:"h-4 w-4"});case"heartbeat":return(0,a.jsx)(D.Z,{className:"h-4 w-4"})}},ea=e=>{switch(e){case"ai_message":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"tool_read":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"tool_edit":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"tool_bash":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"complete":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200";case"error":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"heartbeat":return"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},es=e=>{var r,t;"tool_edit"===e.type&&(null===(r=e.metadata)||void 0===r?void 0:r.old_str)&&(null===(t=e.metadata)||void 0===t?void 0:t.new_str)&&(K(e),X(!0))};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-primary rounded-lg",children:(0,a.jsx)(F.Z,{className:"h-6 w-6 text-primary-foreground"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Backspace Coding Agent"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"AI-powered repository analysis and modification"})]})]}),(0,a.jsx)(u,{variant:"outline",size:"icon",onClick:()=>W("dark"===M?"light":"dark"),children:"dark"===M?(0,a.jsx)(z.Z,{className:"h-4 w-4"}):(0,a.jsx)(G.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(g,{children:[(0,a.jsxs)(h,{className:"flex items-center space-x-2",children:[(0,a.jsx)(F.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Repository & Instructions"})]}),(0,a.jsx)(p,{children:"Enter a GitHub repository URL and describe the changes you want the AI to make"})]}),(0,a.jsx)(v,{children:(0,a.jsxs)("form",{onSubmit:er,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"repo-url",className:"text-sm font-medium",children:"GitHub Repository URL"}),(0,a.jsx)(m,{id:"repo-url",type:"url",placeholder:"https://github.com/owner/repository",value:n,onChange:e=>l(e.target.value),disabled:c,className:"font-mono text-sm"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"prompt",className:"text-sm font-medium",children:"Coding Instructions"}),(0,a.jsx)(f,{id:"prompt",placeholder:"Describe the changes you want to make to the codebase. For example: 'Add comprehensive docstrings to all Python functions' or 'Implement error handling for API calls'",value:o,onChange:e=>i(e.target.value),disabled:c,rows:6,className:"resize-none"})]}),C&&(0,a.jsxs)(N,{variant:"destructive",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),(0,a.jsx)(w,{children:C})]}),(0,a.jsx)(u,{type:"submit",disabled:c||!n||!o,className:"w-full",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),"Start Coding Agent"]})})]})})]}),(0,a.jsxs)(x,{children:[(0,a.jsxs)(g,{children:[(0,a.jsxs)(h,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Z.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Live Progress"})]}),c&&(0,a.jsxs)(j,{variant:"secondary",className:"animate-pulse",children:[(0,a.jsx)(P.Z,{className:"mr-1 h-3 w-3 animate-spin"}),"Streaming"]})]}),(0,a.jsx)(p,{children:"Real-time updates from the coding agent"})]}),(0,a.jsx)(v,{children:(0,a.jsx)(_,{className:"h-96 w-full",ref:J,children:0!==y.length||c?(0,a.jsx)("div",{className:"space-y-3",children:y.map(e=>{var r,t,s,d,n;return(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsxs)(j,{variant:"outline",className:"".concat(ea(e.type)," shrink-0"),children:[et(e.type),(0,a.jsx)("span",{className:"ml-1 text-xs font-medium",children:e.type.replace("_"," ").replace("tool_","")})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"text-sm break-words ".concat("tool_edit"===e.type&&(null===(r=e.metadata)||void 0===r?void 0:r.old_str)&&(null===(t=e.metadata)||void 0===t?void 0:t.new_str)?"cursor-pointer hover:text-primary hover:underline":""),onClick:()=>es(e),children:[e.content,"tool_edit"===e.type&&(null===(s=e.metadata)||void 0===s?void 0:s.old_str)&&(null===(d=e.metadata)||void 0===d?void 0:d.new_str)&&(0,a.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:"(click to view diff)"})]}),(null===(n=e.metadata)||void 0===n?void 0:n.file)&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:e.metadata.file}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.timestamp.toLocaleTimeString()})]})]},e.id)})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(Z.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No activity yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Submit a request to see live progress"})]})})})})]})]}),L&&(0,a.jsxs)(x,{className:"mt-8",children:[(0,a.jsxs)(g,{children:[(0,a.jsxs)(h,{className:"flex items-center space-x-2 text-green-600 dark:text-green-400",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Task Completed Successfully!"})]}),(0,a.jsx)(p,{children:"The coding agent has finished processing your request"})]}),(0,a.jsx)(v,{children:L.prUrl&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-green-800 dark:text-green-200",children:"Pull Request Created"}),(0,a.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Review the changes and merge when ready"})]}),(0,a.jsx)(u,{asChild:!0,variant:"outline",size:"sm",children:(0,a.jsxs)("a",{href:L.prUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"View PR"}),(0,a.jsx)(O.Z,{className:"h-4 w-4"})]})})]})})]}),Q&&$&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,a.jsxs)("div",{className:"bg-background border rounded-lg shadow-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"File Changes"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground font-mono",children:(null===(e=$.metadata)||void 0===e?void 0:e.filepath)||(null===(r=$.metadata)||void 0===r?void 0:r.file)||"Unknown file"})]}),(0,a.jsx)(u,{variant:"ghost",size:"sm",onClick:()=>{X(!1),K(null)},children:(0,a.jsx)(T.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"overflow-auto max-h-[calc(90vh-80px)]",children:(0,a.jsx)(V(),{oldValue:(null===(t=$.metadata)||void 0===t?void 0:t.old_str)||"",newValue:(null===(d=$.metadata)||void 0===d?void 0:d.new_str)||"",splitView:!0,compareMethod:U.DiffMethod.WORDS,leftTitle:"Before",rightTitle:"After",styles:{variables:{light:{codeFoldGutterBackground:"#f7f7f7",codeFoldBackground:"#f1f8ff",addedBackground:"#e6ffed",addedColor:"#24292e",removedBackground:"#ffeef0",removedColor:"#24292e",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0",addedGutterBackground:"#cdffd8",removedGutterBackground:"#fdbdbe",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f7f7f7",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b4"},dark:{codeFoldGutterBackground:"#21262d",codeFoldBackground:"#0d1117",addedBackground:"#0e4429",addedColor:"#e6edf3",removedBackground:"#67060c",removedColor:"#e6edf3",wordAddedBackground:"#238636",wordRemovedBackground:"#da3633",addedGutterBackground:"#0e4429",removedGutterBackground:"#67060c",gutterBackground:"#21262d",gutterBackgroundDark:"#21262d",highlightBackground:"#bb800926",highlightGutterBackground:"#bb800926"}}},useDarkTheme:"dark"===M,showDiffOnly:!1,hideLineNumbers:!1})})]})})]})})}}},function(e){e.O(0,[630,971,117,744],function(){return e(e.s=1382)}),_N_E=e.O()}]);